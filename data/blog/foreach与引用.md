# foreach与引用

先看一段代码

```
// 引用的坑
$arr = ['a'=>1, 'b'=>2, 'c'=>3];

foreach ($arr as &$item)
{
}
var_dump($arr);

foreach ($arr as $item)
{
}
var_dump($arr);
```

运行结果如下

```
array(3) {
  ["a"]=>
  int(1)
  ["b"]=>
  int(2)
  ["c"]=>
  &int(3)
}
array(3) {
  ["a"]=>
  int(1)
  ["b"]=>
  int(2)
  ["c"]=>
  &int(2)
}
```

是不是很神奇，我试着来解释一下。

## 第一个foreach

循环的每一次，数组元素的值都会赋给`&$item`，注意是带`&`的，是引用，而不是`$item`。
所以每次都是给这个引用赋新值，而不会改变数组元素的值；
第一次是`"a"`跟`&$item`对齐，第二次是`"b"`，最后一次是`"c"`，没有第四次了，所以`"c"`是`&int(3)`，
所以`"c"`是引用，而其它a/b只是曾经是引用；
所以，`"c"`跟`$item`指向同一个地址，注意，这次是`$item`，不带`&`。

## 第二个foreach

这时候的数组`$arr`已经跟最开始的有点不一样了，它的`"c"`元素跟`$item`变量指向同一个地址。
这时候，循环的每一次，数组元素的值都会赋给`$item`，不带`&`，而`$item`与`"c"`指向同一个地址；
所以，`"c"`的相关值跟着`$item`变化；
所以，最后`$item`的值是`&int(2)`，`"c"`也如此。
