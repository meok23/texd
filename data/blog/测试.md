
黑盒测试，看不到代码，测试人员QA负责；
白盒测试，看得到代码，程序员自己负责。

QA的测试一般是全局测试，程序员自己的测试一般是单元测试。

什么是单元测试，一个不规范的说法就是：每个函数的独立测试。当然，实际上不止函数，还有sql、正则、switch、独立脚本...

什么时候进行单元测试：一个小单元开发完成之后，代码提交之前。

为什么要进行单元测试：更容易发现问题、找到问题的代价更低、更容易想到解决方案...

### 1）懵懂入门，边写边测
在刚刚开始学编程的时候，不了解什么是单元测试。因为那时候，每敲一行代码都要刷新或者编译执行一下，这不只是单元测试了，甚至都是原子测试了，当然，原子测试是我瞎掰的。所以那个时候是不自觉的进行了单元测试的，不过这种单元测试是没有规划的，不全面的，有些情况还是覆盖不到的。

### 2）登堂入室，写好再测
每敲一行代码就编译执行一遍，效率低的抓狂。后面慢慢成长起来了，可以一口气写几个模块了。一口气写下来，中间是没有像以前那样一行行测试的了。集成到系统里面去，全局去执行，像普通用户一样去操作，然后会发现很多问题，特别多问题，然后一个个改，改完之后再去执行，出错再改，循环反复，改的时间比最初的开发时间还长。发现没有？这里面没有单元测试。

### 3）蓦然回首，重拾单元测试
一口气写完几个模块，写完之后，不要着急把代码集成到系统中。首先，规划好测试用例，每个方法、每个分支、每种情况都测一遍，尽量把每个角落都覆盖到位，这就是单元测试。测完之后，再浏览一遍代码，可能会小小修改一下的，修完之后，再执行一遍单元测试，这一遍应该是自动的。完了之后，才集成到系统里面去，这时候，全局去执行，一般都不会有什么问题的了。

### 4）review代码更重要
在写测试用例进行测试之前，先浏览一遍代码，通过人工过滤的方式找出一些问题。至少，注释的问题，程序是测不出来的，只能人工去发现。

---

[参考文档]
- http://tech.sina.com.cn/s/2009-07-20/1529991506.shtml
- http://blog.csdn.net/happylee6688/article/details/37962283
- http://www.51testing.com/html/48/n-2471648.html

## 番外篇

我以前在流水线上干过无绳电话组装。每个电话由面板、底壳、主板、按键、喇叭、电池... 组成。
在组装之前，如果没有对这些组件分别测试过，那极有可能装好之后的电话是不能用的。那么，拆掉，重新返工。

对应编程，这里有两个概念：
1. 组装之前每个组件的测试就是单元测试。
2. 组装之后，测试电话能不能用就是全局测试。

如果不认真做单元测试，组装好之后的全局测试发现的问题，是要拆机返工的。
